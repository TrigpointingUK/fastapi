# Make config work without .htaccess
<Directory "/var/www/html">
    AllowOverride None
    Require all granted
</Directory>

# Keep core endpoints working at root
RewriteEngine On
# Let real files/dirs pass through unchanged
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Don't rewrite MediaWiki’s special endpoints & assets
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} !^/api\.php
RewriteCond %{REQUEST_URI} !^/rest\.php
RewriteCond %{REQUEST_URI} !^/load\.php
RewriteCond %{REQUEST_URI} !^/resources/
RewriteCond %{REQUEST_URI} !^/skins/
RewriteCond %{REQUEST_URI} !^/vendor/
# (If you store uploads locally, also exclude /images/ and /thumb/)
# RewriteCond %{REQUEST_URI} !^/images/
# RewriteCond %{REQUEST_URI} !^/thumb/

# Everything else → MediaWiki front controller
RewriteRule ^ /index.php [L,QSA]
